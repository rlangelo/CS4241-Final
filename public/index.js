var programLists = [{
    Title: "Altium",
    DwldFile: "/files/Altium.zip",
    ImagePath: "/icons/Altium.jpg",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Audacity",
    DwldFile: "/files/Audacity.zip",
    ImagePath: "/icons/Audacity.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "AutoCAD",
    DwldFile: "/files/AutoCad.zip",
    ImagePath: "/icons/AutoCAD.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "CD Burner XP",
    DwldFile: "/files/CDBurnerXP.zip",
    ImagePath: "/icons/CD-Burner-XP.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "CES Edupack",
    DwldFile: "/files/CESEdupack.zip",
    ImagePath: "/icons/CESEduPack.jpg",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "ChemDrawPro",
    DwldFile: "/files/ChemDrawPro.zip",
    ImagePath: "/icons/ChemDrawPro.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Civil3D",
    DwldFile: "/files/Civil3D.zip",
    ImagePath: "/icons/Civil3D.jpeg",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Creo",
    DwldFile: "/files/Creo.zip",
    ImagePath: "/icons/Creo.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Cumulus",
    DwldFile: "/files/Cumulus.zip",
    ImagePath: "/icons/Cumulus.jpg",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Dr Java",
    DwldFile: "/files/DrJava.zip",
    ImagePath: "/icons/drjava.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Ecopy",
    DwldFile: "/files/Ecopy.zip",
    ImagePath: "/icons/ecopy.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "EndNote",
    DwldFile: "/files/EndNote.zip",
    ImagePath: "/icons/EndNote.jpg",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Flip4Mac",
    DwldFile: "/files/Flip4Mac.zip",
    ImagePath: "/icons/Flip4Mac.jpg",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Four Winds",
    DwldFile: "/files/FourWinds.zip",
    ImagePath: "/icons/FourWinds.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Internet Explorer 11",
    DwldFile: "/files/IE11.zip",
    ImagePath: "/icons/IE11.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Inventor",
    DwldFile: "/files/Inventor.zip",
    ImagePath: "/icons/Inventor.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Map3D",
    DwldFile: "/files/Map3D.zip",
    ImagePath: "/icons/map3d.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Maple",
    DwldFile: "/files/Maple.zip",
    ImagePath: "/icons/Maple.jpg",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "MathCAD",
    DwldFile: "/files/MathCAD.zip",
    ImagePath: "/icons/mathcad.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Mathematica",
    DwldFile: "/files/Mathematica.zip",
    ImagePath: "/icons/Mathematica.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Maya",
    DwldFile: "/files/Maya.zip",
    ImagePath: "/icons/Maya.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "McAfee",
    DwldFile: "/files/McAfee.zip",
    ImagePath: "/icons/McAfee.jpg",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "MEP",
    DwldFile: "/files/MEP.zip",
    ImagePath: "/icons/MEP.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Microsoft NET Framework",
    DwldFile: "/files/MicrosoftNET.zip",
    ImagePath: "/icons/NET.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Microsoft Office",
    DwldFile: "/files/MicrosoftOffice.zip",
    ImagePath: "/icons/Office.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Microsoft Office Communicator",
    DwldFile: "/files/MicrosoftOfficeCommunicator.zip",
    ImagePath: "/icons/Communicator.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Microsoft Visual Studio",
    DwldFile: "/files/MicrosoftVisualStudio.zip",
    ImagePath: "/icons/VisualStudio.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Motion Builder",
    DwldFile: "/files/MotionBuilder.zip",
    ImagePath: "/icons/motionbuilder.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Mudbox",
    DwldFile: "/files/Mudbox.zip",
    ImagePath: "/icons/mudbox.jpg",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Navisworks Manage",
    DwldFile: "/files/Navisworks.zip",
    ImagePath: "/icons/navisworks.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "On Center",
    DwldFile: "/files/OnCenter.zip",
    ImagePath: "/icons/on-center.jpg",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "PuTTY",
    DwldFile: "/files/PuTTY.zip",
    ImagePath: "/icons/putty.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Recap",
    DwldFile: "/files/Recap.zip",
    ImagePath: "/icons/ReCap.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Remedy",
    DwldFile: "/files/Remedy.zip",
    ImagePath: "/icons/Remedy.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Remote Desktop Connection for Mac",
    DwldFile: "/files/RemoteDesktop.zip",
    ImagePath: "/icons/RDC.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Revit",
    DwldFile: "/files/Revit.zip",
    ImagePath: "/icons/Revit.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Robot Structural Analysis",
    DwldFile: "/files/RobotStructural.zip",
    ImagePath: "/icons/RobotStructural.jpg",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "SolidWorks",
    DwldFile: "/files/SolidWorks.zip",
    ImagePath: "/icons/SolidWorks.jpg",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "SPSS",
    DwldFile: "/files/SPSS.zip",
    ImagePath: "/icons/SPSS.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Stuffit 2010",
    DwldFile: "/files/Stuffit2010.zip",
    ImagePath: "/icons/stuffit.png",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Utility Design",
    DwldFile: "/files/UtilityDesign.zip",
    ImagePath: "/icons/UtilityDesign.jpg",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Viz",
    DwldFile: "/files/Viz.zip",
    ImagePath: "/icons/VIZ.jpg",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "Windows Media Encoder",
    DwldFile: "/files/WME.zip",
    ImagePath: "/icons/WME.jpg",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "X11 for Intel Mac",
    DwldFile: "/files/X11.zip",
    ImagePath: "/icons/x11.jpg",
    Instructions: "https://www.wpi.edu"
},
{
    Title: "X-Win32",
    DwldFile: "/files/XWin32.zip",
    ImagePath: "/icons/xwin32.png",
    Instructions: "https://www.wpi.edu"
}
]

var programmableLists = [];

programs();

document.getElementById("submit").addEventListener("click", programs);

var searchQuery = "";



function programs() {
    searchQuery = document.getElementById("search").value;
    console.log(searchQuery);
    document.getElementById("search").value = "";
    var req = new XMLHttpRequest();

    req.open('GET', '/programs');

    req.addEventListener("load", handleRes)

    req.send();
    return false;
}

function handleRes() {
    if (this.readyState !== XMLHttpRequest.DONE)
        return;

    if (this.status === 200) {
        sendPosts(this);
    }

}


function sendPosts(req) {
    var requestResponse = req.responseText;
    var json = JSON.parse(requestResponse);
    programmableLists = json;
    var str = "";
    var counter = 2;
    document.getElementById("left").innerHTML = "";
    document.getElementById("right").innerHTML = "";

    programmableLists.forEach( function(p, i) {
      str = programTemplate(programLists[i]);
      if ((counter % 2) == 0) {
        if (programmableLists[i].toUpperCase().indexOf(searchQuery.toUpperCase()) > -1) {
          document.getElementById("left").innerHTML += str;
          counter++;
        }
      }
      else {
        if (json[i].toUpperCase().indexOf(searchQuery.toUpperCase()) > -1) {
          document.getElementById("right").innerHTML += str;
          counter++;
        }
      }
    });

  }
